<%- include('../../views/partials/user/header', {title: 'Order Failed'}) %>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes shake {
        0%, 20%, 40%, 60%, 80%, 100% {
            transform: translateX(0);
        }
        10%, 30%, 50%, 70%, 90% {
            transform: translateX(-5px);
        }
    }
    
    @keyframes pulse-error {
        0%, 100% {
            box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
        }
        50% {
            box-shadow: 0 0 0 20px rgba(239, 68, 68, 0);
        }
    }
    
    @keyframes shoePrint {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        33% { transform: translateY(-5px) rotate(2deg); }
        66% { transform: translateY(5px) rotate(-2deg); }
    }
    
    .fade-in-up {
        animation: fadeInUp 0.6s ease-out forwards;
    }
    
    .shake {
        animation: shake 0.5s ease-in-out;
    }
    
    .pulse-error {
        animation: pulse-error 2s infinite;
    }
    
    .shoe-float {
        animation: shoePrint 3s ease-in-out infinite;
    }
    
    .glass-effect {
        backdrop-filter: blur(16px);
        background: rgba(255, 255, 255, 0.95);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.6);
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
    }
    
    @keyframes ripple {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
</style>

<body class="gradient-bg min-h-screen flex items-center justify-center py-4 px-4 sm:px-6 lg:px-8">
    <!-- Background Pattern -->
    <div class="absolute inset-0 opacity-10">
        <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.15) 1px, transparent 0); background-size: 30px 30px;"></div>
    </div>
    
    <!-- Main Container -->
    <div class="relative z-10 w-full max-w-lg mx-auto">
        <!-- Error Card -->
        <div class="glass-effect rounded-2xl shadow-2xl p-6 sm:p-8 md:p-10 text-center fade-in-up">
            <!-- Error Icon -->
            <div class="mb-6 sm:mb-8">
                <div class="relative inline-block">
                    <div class="w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 bg-red-100 rounded-full flex items-center justify-center pulse-error shake">
                        <i class="fas fa-times-circle text-red-500 text-4xl sm:text-5xl md:text-6xl"></i>
                    </div>
                    <!-- Decorative circles -->
                    <div class="absolute -top-2 -right-2 w-6 h-6 bg-red-200 rounded-full opacity-60"></div>
                    <div class="absolute -bottom-1 -left-1 w-4 h-4 bg-red-300 rounded-full opacity-40"></div>
                </div>
            </div>
            
            <!-- Title -->
            <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-3 sm:mb-4">
                Payment Failed
            </h1>
            
            <!-- Subtitle -->
            <div class="w-16 h-1 bg-gradient-to-r from-red-400 to-red-600 mx-auto mb-4 sm:mb-6 rounded-full"></div>
            
            <!-- Error Message -->
            <div class="bg-red-50 border-l-4 border-red-400 p-4 mb-6 sm:mb-8 rounded-r-lg">
                <div class="flex items-start">
                    <i class="fas fa-exclamation-triangle text-red-400 mt-1 mr-3 flex-shrink-0"></i>
                    <div class="text-left">
                        <p class="text-sm sm:text-base text-gray-700 leading-relaxed">
                            Your payment couldn't keep pace with our checkout process. Don't worry, let's get you back on track to grab those perfect kicks!
                        </p>
                        <!-- Reference ID with EJS conditional -->
                        <% if (razorpayOrderId) { %>
                        <div class="mt-3 p-2 bg-gray-100 rounded text-xs sm:text-sm">
                            <span class="text-gray-600">Reference ID:</span>
                            <span class="font-mono font-medium text-gray-800 ml-1"><%= razorpayOrderId %></span>
                        </div>
                        <% } %>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="space-y-3 sm:space-y-0 sm:space-x-4 sm:flex sm:justify-center">
                <a href="/check-out" 
                   class="w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-red-300">
                    <i class="fas fa-redo mr-2"></i>
                    Retry Payment
                </a>
                <a href="/getOrders" 
                   class="w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-white hover:bg-gray-50 text-gray-700 font-semibold rounded-lg border-2 border-gray-200 hover:border-gray-300 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-gray-200">
                    <i class="fas fa-list mr-2"></i>
                    View Orders
                </a>
            </div>
            
            <!-- Help Section -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <p class="text-xs sm:text-sm text-gray-600 mb-3">
                    Need help? Contact our support team
                </p>
                <div class="flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-6 text-xs sm:text-sm">
                    <a href="mailto:support@example.com" class="flex items-center text-blue-600 hover:text-blue-800 transition-colors">
                        <i class="fas fa-envelope mr-2"></i>
                        support@example.com
                    </a>
                    <a href="tel:+1234567890" class="flex items-center text-blue-600 hover:text-blue-800 transition-colors">
                        <i class="fas fa-phone mr-2"></i>
                        +1 (234) 567-890
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Back to Home Link -->
        <div class="text-center mt-6">
            <a href="/" class="inline-flex items-center text-white hover:text-gray-200 transition-colors text-sm font-medium">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Home
            </a>
        </div>
    </div>
    
    <!-- Floating Shoe Elements -->
    <div class="fixed top-10 left-10 w-20 h-20 text-white opacity-10 flex items-center justify-center shoe-float" style="animation-delay: 0s;">
        <i class="fas fa-shoe-prints text-2xl"></i>
    </div>
    <div class="fixed bottom-10 right-10 w-16 h-16 text-white opacity-10 flex items-center justify-center shoe-float" style="animation-delay: 1s;">
        <i class="fas fa-shoe-prints text-xl"></i>
    </div>
    <div class="fixed top-1/2 left-5 w-12 h-12 text-white opacity-10 flex items-center justify-center shoe-float" style="animation-delay: 2s;">
        <i class="fas fa-shoe-prints text-lg"></i>
    </div>
    
    <script>
        // Add interactive effects
        document.addEventListener('DOMContentLoaded', function() {
            // Add click effect to buttons
            const buttons = document.querySelectorAll('a[href]');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // Create ripple effect
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    ripple.classList.add('ripple');
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
        });
    </script>
</body>
<%- include('../../views/partials/user/footer') %>